(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af521a02"],{"07ce":function(t,e,i){},5275:function(t,e,i){"use strict";var a=i("07ce"),n=i.n(a);n.a},7186:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-container"},[i("div",{staticClass:"table-wrapper"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"stripe",border:"border"}},[i("el-table-column",{attrs:{type:"index",label:"编号",width:"80",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"user_name",label:"发布者",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"comment",label:"评论数",align:"center",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{label:"点赞数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row["support"].count))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"create_time",label:"发布时间",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"topic_status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{class:t.statusTxt(e.row["topic_status"])[0]},[t._v(t._s(t.statusTxt(e.row["topic_status"])[1]))])]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),t.showPreviewTalg(e.$index,t.tableData)}}},[t._v("查看内容")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),t.showDisableTopic(e.$index,t.tableData)}}},[t._v(t._s(t.statusTxt(e.row["topic_status"])[2]))]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),t.showDeleteTopic(e.$index,t.tableData)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"bottom-button"},[i("el-button-group",[i("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",disabled:1===t.page},on:{click:t.prevPage}},[t._v("上一页")]),t._v(" "),i("el-button",{attrs:{type:"primary",disabled:t.tableData.length<t.count},on:{click:t.nextPage}},[t._v("\n        下一页\n        "),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"话题权限",visible:t.disableDialogVisible,width:"30%"},on:{"update:visible":function(e){t.disableDialogVisible=e}}},[i("span",[t._v("是否"+t._s(t.dialogTxt))]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeDisableDialog}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.disableTopicCallback}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"话题删除",visible:t.deleteDialogVisible,width:"30%"},on:{"update:visible":function(e){t.deleteDialogVisible=e}}},[i("span",[t._v("是否删除")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeDeleteDialog}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.deleteTopicCallback}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"话题内容",visible:t.previewDialogVisible,width:"30%"},on:{"update:visible":function(e){t.previewDialogVisible=e}}},[i("div",{staticClass:"content-wrapper"},[i("p",{staticClass:"txt"},[t._v(t._s(t.topicContent.text))]),t._v(" "),i("div",{staticClass:"image-wrapper"},t._l(t.topicContent.images,(function(t,e){return i("img",{key:e,staticClass:"image",attrs:{src:t,alt:""}})})),0)])])],1)},n=[],s=(i("96cf"),i("3b8d")),r=i("b775"),o=i("da71");function l(t){return Object(r["a"])({url:"".concat(o["a"].BASE_URL,"/topic/topic-list"),method:"get",params:t})}function c(t){return Object(r["a"])({url:"".concat(o["a"].BASE_URL,"/topic/delete"),method:"get",params:t})}function u(t){return Object(r["a"])({url:"".concat(o["a"].BASE_URL,"/topic/disable"),method:"get",params:t})}var p={name:"User",data:function(){return{page:1,count:10,dialogTxt:"禁用",topicId:0,topicContent:{text:"",images:[]},disableDialogVisible:!1,deleteDialogVisible:!1,previewDialogVisible:!1,tableData:[]}},created:function(){this.fetchRequest(this.page,this.count)},methods:{openPreviewDialog:function(){this.previewDialogVisible=!0},closePreviewDialog:function(){this.previewDialogVisible=!1},openDeleteDialog:function(){this.deleteDialogVisible=!0},closeDeleteDialog:function(){this.deleteDialogVisible=!1},opneDisableDialog:function(){this.disableDialogVisible=!0},closeDisableDialog:function(){this.disableDialogVisible=!1},showDeleteTopic:function(t,e){var i=e[t].topic_id;this.topicId=i,this.openDeleteDialog()},deleteTopicCallback:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$loading({lock:!0,text:"".concat(this.dialogTxt,"中..."),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.prev=1,t.next=4,c({topic_id:this.topicId});case 4:if(i=t.sent,a=i.data,1!==a.noerr){t.next=8;break}throw new Error;case 8:this.page=1,this.fetchRequest(this.page,this.count),this.$message.success("删除成功"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),this.$message.error("删除失败");case 16:return t.prev=16,e.close(),this.closeDeleteDialog(),t.finish(16);case 20:case"end":return t.stop()}}),t,this,[[1,13,16,20]])})));function e(){return t.apply(this,arguments)}return e}(),showDisableTopic:function(t,e){var i=e[t].topic_id;this.topicId=i,this.dialogTxt=this.statusTxt(e[t].topic_status)[2],this.opneDisableDialog()},disableTopicCallback:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$loading({lock:!0,text:"".concat(this.dialogTxt,"中..."),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.prev=1,t.next=4,u({topic_id:this.topicId});case 4:if(i=t.sent,a=i.data,console.log(a),1!==a.noerr){t.next=9;break}throw new Error;case 9:this.$message.success("".concat(this.dialogTxt,"成功")),this.page=1,this.fetchRequest(this.page,this.count),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),this.$message.error("".concat(this.dialogTxt,"失败"));case 17:return t.prev=17,e.close(),this.closeDisableDialog(),t.finish(17);case 21:case"end":return t.stop()}}),t,this,[[1,14,17,21]])})));function e(){return t.apply(this,arguments)}return e}(),showPreviewTalg:function(t,e){var i=e[t].topic_content;this.topicContent=JSON.parse(i),this.openPreviewDialog()},fetchRequest:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,i){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l({page:e,count:i});case 3:a=t.sent,n=a.data,console.log(n),this.tableData=n.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.$message.error("获取列表失败");case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e,i){return t.apply(this,arguments)}return e}(),nextPage:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.page=this.page+1,t.next=3,this.fetchRequest(this.page,this.count);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),prevPage:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.page=this.page-1,t.next=3,this.fetchRequest(this.page,this.count);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),statusTxt:function(t){return 1===+t?["status-1","禁用","启用"]:["status-0","正常","禁用"]}}},h=p,g=(i("5275"),i("2877")),b=Object(g["a"])(h,a,n,!1,null,"154808db",null);e["default"]=b.exports}}]);