(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6451168a"],{"3c04":function(e,t,i){"use strict";var a=i("76c6"),n=i.n(a);n.a},"4aa1":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-container"},[i("div",{staticClass:"table-wrapper"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"stripe",border:"border"}},[i("el-table-column",{attrs:{type:"index",label:"编号",width:"80",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"user_name",label:"发布者",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"video_description",label:"视频描述",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"comment",label:"评论数",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"video_share",label:"分享数",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"点赞数",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row["support"].count))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"create_time",label:"发布时间",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"video_status",label:"状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{class:e.statusTxt(t.row["video_status"])[0]},[e._v(e._s(e.statusTxt(t.row["video_status"])[1]))])]}}])}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),e.showPreviewVideo(t.$index,e.tableData)}}},[e._v("查看内容")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),e.showDisableVideo(t.$index,e.tableData)}}},[e._v(e._s(e.statusTxt(t.row["video_status"])[2]))]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),e.showDeleteVideo(t.$index,e.tableData)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"bottom-button"},[i("el-button-group",[i("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",disabled:1===e.page},on:{click:e.prevPage}},[e._v("上一页")]),e._v(" "),i("el-button",{attrs:{type:"primary",disabled:e.tableData.length<e.count},on:{click:e.nextPage}},[e._v("\n        下一页\n        "),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"视频权限",visible:e.disableDialogVisible,width:"30%"},on:{"update:visible":function(t){e.disableDialogVisible=t}}},[i("span",[e._v("是否"+e._s(e.dialogTxt))]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDisableDialog}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.disableVideoCallback}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"视频删除",visible:e.deleteDialogVisible,width:"30%"},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[i("span",[e._v("是否删除")]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDeleteDialog}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.deleteVideoCallback}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"视频内容",visible:e.previewDialogVisible,width:"30%"},on:{"update:visible":function(t){e.previewDialogVisible=t}}},[i("div",{staticClass:"content-wrapper"},[i("p",[e._v("展示图：")]),e._v(" "),i("img",{staticClass:"preview-banner",attrs:{src:e.bannerUrl,alt:""}}),e._v(" "),i("p",[e._v("视频：")]),e._v(" "),i("video",{attrs:{width:"100%",height:"240",src:e.videoUrl,type:"video/mp4",controls:""}})])])],1)},n=[],s=(i("96cf"),i("3b8d")),r=i("b775"),o=i("da71");function l(e){return Object(r["a"])({url:"".concat(o["a"].BASE_URL,"/video/video-list"),method:"get",params:e})}function c(e){return Object(r["a"])({url:"".concat(o["a"].BASE_URL,"/video/delete"),method:"get",params:e})}function u(e){return Object(r["a"])({url:"".concat(o["a"].BASE_URL,"/video/disable"),method:"get",params:e})}var d={name:"User",data:function(){return{page:1,count:10,dialogTxt:"禁用",videoId:0,videoUrl:"",bannerUrl:"",videoContent:{content:"",images:[]},disableDialogVisible:!1,deleteDialogVisible:!1,previewDialogVisible:!1,tableData:[]}},created:function(){this.fetchRequest(this.page,this.count)},methods:{openPreviewDialog:function(){this.previewDialogVisible=!0},closePreviewDialog:function(){this.previewDialogVisible=!1},openDeleteDialog:function(){this.deleteDialogVisible=!0},closeDeleteDialog:function(){this.deleteDialogVisible=!1},opneDisableDialog:function(){this.disableDialogVisible=!0},closeDisableDialog:function(){this.disableDialogVisible=!1},showDeleteVideo:function(e,t){var i=t[e].video_id;this.videoId=i,this.openDeleteDialog()},deleteVideoCallback:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading({lock:!0,text:"".concat(this.dialogTxt,"中..."),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),e.prev=1,e.next=4,c({video_id:this.videoId});case 4:if(i=e.sent,a=i.data,1!==a.noerr){e.next=8;break}throw new Error;case 8:this.page=1,this.fetchRequest(this.page,this.count),this.$message.success("删除成功"),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),this.$message.error("删除失败");case 16:return e.prev=16,t.close(),this.closeDeleteDialog(),e.finish(16);case 20:case"end":return e.stop()}}),e,this,[[1,13,16,20]])})));function t(){return e.apply(this,arguments)}return t}(),showDisableVideo:function(e,t){var i=t[e].video_id;this.videoId=i,this.dialogTxt=this.statusTxt(t[e].video_status)[2],this.opneDisableDialog()},disableVideoCallback:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading({lock:!0,text:"".concat(this.dialogTxt,"中..."),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),e.prev=1,e.next=4,u({video_id:this.videoId});case 4:if(i=e.sent,a=i.data,1!==a.noerr){e.next=8;break}throw new Error;case 8:this.$message.success("".concat(this.dialogTxt,"成功")),this.page=1,this.fetchRequest(this.page,this.count),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),this.$message.error("".concat(this.dialogTxt,"失败"));case 16:return e.prev=16,t.close(),this.closeDisableDialog(),e.finish(16);case 20:case"end":return e.stop()}}),e,this,[[1,13,16,20]])})));function t(){return e.apply(this,arguments)}return t}(),showPreviewVideo:function(e,t){this.videoUrl="",this.bannerUrl="";var i=t[e].video_banner,a=t[e].video_url;this.videoUrl=a,this.bannerUrl=i,this.openPreviewDialog()},fetchRequest:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,i){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({page:t,count:i});case 3:a=e.sent,n=a.data,console.log(n),this.tableData=n.data,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$message.error("获取列表失败");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t,i){return e.apply(this,arguments)}return t}(),nextPage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.page=this.page+1,e.next=3,this.fetchRequest(this.page,this.count);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),prevPage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.page=this.page-1,e.next=3,this.fetchRequest(this.page,this.count);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),statusTxt:function(e){return 1===+e?["status-1","禁用","启用"]:["status-0","正常","禁用"]}}},p=d,v=(i("3c04"),i("2877")),h=Object(v["a"])(p,a,n,!1,null,"01303def",null);t["default"]=h.exports},"76c6":function(e,t,i){}}]);